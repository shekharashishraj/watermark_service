{"ast":null,"code":"var _jsxFileName = \"/Users/ashishrajshekhar/Desktop/ASU/Fall 2025/watermark_service/frontend/src/components/VisualPositioning.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useRef, useEffect } from 'react';\nimport { motion } from 'framer-motion';\nimport styled from 'styled-components';\nimport { X, Eye, Save, RotateCcw, Move, Target, FileText } from 'lucide-react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst PositioningContainer = styled.div`\n  position: relative;\n`;\n_c = PositioningContainer;\nconst Header = styled.div`\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 30px;\n`;\n_c2 = Header;\nconst Title = styled.h2`\n  font-size: 1.8rem;\n  font-weight: 600;\n  color: #1a202c;\n  display: flex;\n  align-items: center;\n  gap: 10px;\n`;\n_c3 = Title;\nconst CloseButton = styled.button`\n  background: #fed7d7;\n  color: #c53030;\n  border: none;\n  border-radius: 8px;\n  padding: 12px;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: all 0.3s ease;\n\n  &:hover {\n    background: #feb2b2;\n    transform: scale(1.1);\n  }\n`;\n_c4 = CloseButton;\nconst Instructions = styled.div`\n  background: #ebf8ff;\n  border: 1px solid #bee3f8;\n  border-radius: 12px;\n  padding: 20px;\n  margin-bottom: 30px;\n`;\n_c5 = Instructions;\nconst InstructionsTitle = styled.h3`\n  font-size: 1.1rem;\n  font-weight: 600;\n  color: #2b6cb0;\n  margin-bottom: 15px;\n  display: flex;\n  align-items: center;\n  gap: 8px;\n`;\n_c6 = InstructionsTitle;\nconst InstructionsList = styled.ul`\n  list-style: none;\n  padding: 0;\n  margin: 0;\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));\n  gap: 10px;\n`;\n_c7 = InstructionsList;\nconst InstructionItem = styled.li`\n  color: #4a5568;\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  font-size: 0.9rem;\n\n  &:before {\n    content: \"â€¢\";\n    color: #667eea;\n    font-weight: bold;\n  }\n`;\n_c8 = InstructionItem;\nconst PreviewContainer = styled.div`\n  position: relative;\n  background: #f8fafc;\n  border: 2px solid #e2e8f0;\n  border-radius: 12px;\n  padding: 20px;\n  min-height: 600px;\n  overflow: hidden;\n`;\n_c9 = PreviewContainer;\nconst PDFPreview = styled.div`\n  position: relative;\n  width: 100%;\n  height: 560px;\n  background: white;\n  border: 1px solid #e2e8f0;\n  border-radius: 8px;\n  overflow: hidden;\n  box-shadow: 0 4px 12px rgba(0,0,0,0.1);\n`;\n_c0 = PDFPreview;\nconst PDFContent = styled.div`\n  width: 100%;\n  height: 100%;\n  background: \n    linear-gradient(45deg, #f0f0f0 25%, transparent 25%), \n    linear-gradient(-45deg, #f0f0f0 25%, transparent 25%), \n    linear-gradient(45deg, transparent 75%, #f0f0f0 75%), \n    linear-gradient(-45deg, transparent 75%, #f0f0f0 75%);\n  background-size: 20px 20px;\n  background-position: 0 0, 0 10px, 10px -10px, -10px 0px;\n  position: relative;\n  overflow: hidden;\n`;\n_c1 = PDFContent;\nconst PDFBackground = styled.div`\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background: white;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  z-index: 1;\n`;\n_c10 = PDFBackground;\nconst PDFImage = styled.object`\n  max-width: 100%;\n  max-height: 100%;\n  object-fit: contain;\n  box-shadow: 0 4px 12px rgba(0,0,0,0.1);\n  border: 1px solid #e2e8f0;\n  border-radius: 4px;\n`;\n_c11 = PDFImage;\nconst PDFPlaceholder = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  height: 100%;\n  color: #718096;\n  font-size: 1.1rem;\n  text-align: center;\n  padding: 20px;\n`;\n_c12 = PDFPlaceholder;\nconst PDFIcon = styled.div`\n  font-size: 3rem;\n  margin-bottom: 15px;\n  color: #cbd5e0;\n`;\n_c13 = PDFIcon;\nconst DraggableWatermark = styled(motion.div)`\n  position: absolute;\n  cursor: move;\n  user-select: none;\n  padding: 8px 12px;\n  border-radius: 6px;\n  background: rgba(102, 126, 234, 0.9);\n  color: white;\n  font-weight: 600;\n  font-size: ${props => props.fontSize}px;\n  color: ${props => props.color};\n  opacity: ${props => props.opacity};\n  transform: rotate(${props => props.rotation}deg);\n  box-shadow: 0 4px 12px rgba(0,0,0,0.2);\n  border: 2px solid rgba(255,255,255,0.3);\n  z-index: 20;\n  transition: all 0.3s ease;\n  backdrop-filter: blur(2px);\n\n  &:hover {\n    box-shadow: 0 6px 20px rgba(0,0,0,0.3);\n    transform: rotate(${props => props.rotation}deg) scale(1.05);\n  }\n\n  &.dragging {\n    z-index: 100;\n    box-shadow: 0 8px 25px rgba(0,0,0,0.4);\n  }\n`;\n_c14 = DraggableWatermark;\nconst WatermarkHandle = styled.div`\n  position: absolute;\n  top: -8px;\n  right: -8px;\n  width: 20px;\n  height: 20px;\n  background: #c53030;\n  border-radius: 50%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  cursor: pointer;\n  color: white;\n  font-size: 12px;\n  font-weight: bold;\n  box-shadow: 0 2px 6px rgba(0,0,0,0.3);\n  transition: all 0.3s ease;\n\n  &:hover {\n    background: #e53e3e;\n    transform: scale(1.2);\n  }\n`;\n_c15 = WatermarkHandle;\nconst PositionIndicator = styled.div`\n  position: absolute;\n  top: 10px;\n  right: 10px;\n  background: rgba(0,0,0,0.8);\n  color: white;\n  padding: 8px 12px;\n  border-radius: 6px;\n  font-size: 0.8rem;\n  font-weight: 600;\n  z-index: 50;\n  pointer-events: none;\n`;\n_c16 = PositionIndicator;\nconst Controls = styled.div`\n  display: flex;\n  justify-content: center;\n  gap: 15px;\n  margin-top: 20px;\n`;\n_c17 = Controls;\nconst Button = styled(motion.button)`\n  padding: 12px 24px;\n  border: none;\n  border-radius: 8px;\n  font-weight: 600;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  transition: all 0.3s ease;\n\n  &.primary {\n    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n    color: white;\n    \n    &:hover {\n      transform: translateY(-2px);\n      box-shadow: 0 8px 25px rgba(102, 126, 234, 0.3);\n    }\n  }\n\n  &.secondary {\n    background: #f7fafc;\n    color: #4a5568;\n    border: 2px solid #e2e8f0;\n    \n    &:hover {\n      background: #edf2f7;\n      border-color: #cbd5e0;\n    }\n  }\n`;\n_c18 = Button;\nfunction VisualPositioning({\n  watermarks,\n  onUpdateProperty,\n  onRemoveWatermark,\n  onClose,\n  currentFileId,\n  apiBaseUrl\n}) {\n  _s();\n  const [isDragging, setIsDragging] = useState(false);\n  const [draggedElement, setDraggedElement] = useState(null);\n  const [dragOffset, setDragOffset] = useState({\n    x: 0,\n    y: 0\n  });\n  const [positionIndicator, setPositionIndicator] = useState({\n    x: 0,\n    y: 0,\n    visible: false\n  });\n  const [pdfUrl, setPdfUrl] = useState(null);\n  const [pdfLoading, setPdfLoading] = useState(false);\n  const [localWatermarks, setLocalWatermarks] = useState(watermarks);\n  const previewRef = useRef(null);\n  const handleMouseDown = (e, watermarkId) => {\n    e.preventDefault();\n    setIsDragging(true);\n    setDraggedElement(watermarkId);\n    const rect = e.currentTarget.getBoundingClientRect();\n    const previewRect = previewRef.current.getBoundingClientRect();\n    setDragOffset({\n      x: e.clientX - rect.left,\n      y: e.clientY - rect.top\n    });\n  };\n  const handleMouseMove = e => {\n    if (!isDragging || !draggedElement) return;\n    const previewRect = previewRef.current.getBoundingClientRect();\n    const x = e.clientX - previewRect.left - dragOffset.x;\n    const y = e.clientY - previewRect.top - dragOffset.y;\n\n    // Constrain to preview bounds\n    const constrainedX = Math.max(0, Math.min(x, previewRect.width - 100));\n    const constrainedY = Math.max(0, Math.min(y, previewRect.height - 50));\n\n    // Update position indicator\n    setPositionIndicator({\n      x: constrainedX,\n      y: constrainedY,\n      visible: true\n    });\n\n    // Convert to PDF coordinates (assuming A4 ratio)\n    const pdfX = constrainedX / previewRect.width * 595; // A4 width in points\n    const pdfY = constrainedY / previewRect.height * 842; // A4 height in points\n\n    console.log(`Dragging watermark ${draggedElement} to PDF coordinates: x=${Math.round(pdfX)}, y=${Math.round(pdfY)}`); // Debug\n\n    // Update local state immediately for real-time feedback\n    setLocalWatermarks(prev => prev.map(w => w.id === draggedElement ? {\n      ...w,\n      position: 'custom',\n      custom_x: Math.round(pdfX),\n      custom_y: Math.round(pdfY)\n    } : w));\n  };\n  const handleMouseUp = () => {\n    if (draggedElement) {\n      // Send final position to backend\n      const watermark = localWatermarks.find(w => w.id === draggedElement);\n      if (watermark && watermark.position === 'custom') {\n        onUpdateProperty(draggedElement, 'position', 'custom');\n        onUpdateProperty(draggedElement, 'custom_x', watermark.custom_x);\n        onUpdateProperty(draggedElement, 'custom_y', watermark.custom_y);\n      }\n    }\n    setIsDragging(false);\n    setDraggedElement(null);\n    setPositionIndicator(prev => ({\n      ...prev,\n      visible: false\n    }));\n  };\n  useEffect(() => {\n    if (isDragging) {\n      const handleMouseMoveEvent = e => handleMouseMove(e);\n      const handleMouseUpEvent = () => handleMouseUp();\n      document.addEventListener('mousemove', handleMouseMoveEvent);\n      document.addEventListener('mouseup', handleMouseUpEvent);\n      return () => {\n        document.removeEventListener('mousemove', handleMouseMoveEvent);\n        document.removeEventListener('mouseup', handleMouseUpEvent);\n      };\n    }\n  }, [isDragging, draggedElement, dragOffset]);\n  const getWatermarkPosition = watermark => {\n    var _previewRef$current;\n    const previewRect = (_previewRef$current = previewRef.current) === null || _previewRef$current === void 0 ? void 0 : _previewRef$current.getBoundingClientRect();\n    if (!previewRect) {\n      return {\n        x: 250,\n        y: 250\n      }; // Default center position\n    }\n    if (watermark.position === 'custom' && watermark.custom_x !== undefined && watermark.custom_y !== undefined) {\n      // Convert PDF coordinates back to screen coordinates\n      const x = watermark.custom_x / 595 * previewRect.width;\n      const y = watermark.custom_y / 842 * previewRect.height;\n      console.log(`Watermark ${watermark.id} custom position: PDF(${watermark.custom_x}, ${watermark.custom_y}) -> Screen(${x}, ${y})`);\n      return {\n        x,\n        y\n      };\n    }\n\n    // Default positions based on preview size\n    const centerX = previewRect.width / 2;\n    const centerY = previewRect.height / 2;\n    const margin = 50;\n    const positions = {\n      'top-left': {\n        x: margin,\n        y: margin\n      },\n      'top-center': {\n        x: centerX,\n        y: margin\n      },\n      'top-right': {\n        x: previewRect.width - margin,\n        y: margin\n      },\n      'center-left': {\n        x: margin,\n        y: centerY\n      },\n      'center': {\n        x: centerX,\n        y: centerY\n      },\n      'center-right': {\n        x: previewRect.width - margin,\n        y: centerY\n      },\n      'bottom-left': {\n        x: margin,\n        y: previewRect.height - margin\n      },\n      'bottom-center': {\n        x: centerX,\n        y: previewRect.height - margin\n      },\n      'bottom-right': {\n        x: previewRect.width - margin,\n        y: previewRect.height - margin\n      }\n    };\n    return positions[watermark.position] || positions.center;\n  };\n  const resetPositions = () => {\n    localWatermarks.forEach(watermark => {\n      onUpdateProperty(watermark.id, 'position', 'center');\n      onUpdateProperty(watermark.id, 'custom_x', '');\n      onUpdateProperty(watermark.id, 'custom_y', '');\n    });\n\n    // Update local state\n    setLocalWatermarks(prev => prev.map(w => ({\n      ...w,\n      position: 'center',\n      custom_x: '',\n      custom_y: ''\n    })));\n  };\n\n  // Load PDF for visual positioning\n  useEffect(() => {\n    if (currentFileId && apiBaseUrl) {\n      setPdfLoading(true);\n      // Use the preview endpoint to get the PDF for visual positioning\n      setPdfUrl(`${apiBaseUrl}/preview/${currentFileId}`);\n      setPdfLoading(false);\n    }\n  }, [currentFileId, apiBaseUrl]);\n\n  // Sync local watermarks with props and remove duplicates\n  useEffect(() => {\n    // Remove duplicates based on ID\n    const uniqueWatermarks = watermarks.filter((watermark, index, self) => index === self.findIndex(w => w.id === watermark.id));\n    setLocalWatermarks(uniqueWatermarks);\n  }, [watermarks]);\n  return /*#__PURE__*/_jsxDEV(PositioningContainer, {\n    children: [/*#__PURE__*/_jsxDEV(Header, {\n      children: [/*#__PURE__*/_jsxDEV(Title, {\n        children: [/*#__PURE__*/_jsxDEV(Eye, {\n          size: 24\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 433,\n          columnNumber: 11\n        }, this), \"Visual Watermark Positioning\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 432,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(CloseButton, {\n        onClick: onClose,\n        children: /*#__PURE__*/_jsxDEV(X, {\n          size: 20\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 437,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 436,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 431,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Instructions, {\n      children: [/*#__PURE__*/_jsxDEV(InstructionsTitle, {\n        children: [/*#__PURE__*/_jsxDEV(Target, {\n          size: 20\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 443,\n          columnNumber: 11\n        }, this), \"Drag and Drop Instructions\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 442,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(InstructionsList, {\n        children: [/*#__PURE__*/_jsxDEV(InstructionItem, {\n          children: [/*#__PURE__*/_jsxDEV(Move, {\n            size: 16\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 448,\n            columnNumber: 13\n          }, this), \"Click and drag watermarks to position them anywhere on the PDF\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 447,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(InstructionItem, {\n          children: [/*#__PURE__*/_jsxDEV(Target, {\n            size: 16\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 452,\n            columnNumber: 13\n          }, this), \"Watch the coordinates update in real-time as you drag\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 451,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(InstructionItem, {\n          children: [/*#__PURE__*/_jsxDEV(Save, {\n            size: 16\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 456,\n            columnNumber: 13\n          }, this), \"Click 'Save Positions' to apply your changes\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 455,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 446,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 441,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(PreviewContainer, {\n      children: [/*#__PURE__*/_jsxDEV(PDFPreview, {\n        ref: previewRef,\n        children: /*#__PURE__*/_jsxDEV(PDFContent, {\n          children: [/*#__PURE__*/_jsxDEV(PDFBackground, {\n            children: pdfLoading ? /*#__PURE__*/_jsxDEV(PDFPlaceholder, {\n              children: [/*#__PURE__*/_jsxDEV(PDFIcon, {\n                children: /*#__PURE__*/_jsxDEV(FileText, {\n                  size: 60\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 469,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 468,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: \"Loading PDF preview...\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 471,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 467,\n              columnNumber: 17\n            }, this) : pdfUrl ? /*#__PURE__*/_jsxDEV(PDFImage, {\n              data: pdfUrl,\n              type: \"application/pdf\",\n              onError: () => {\n                // Fallback to placeholder if PDF loading fails\n                setPdfUrl(null);\n              },\n              children: /*#__PURE__*/_jsxDEV(PDFPlaceholder, {\n                children: [/*#__PURE__*/_jsxDEV(PDFIcon, {\n                  children: /*#__PURE__*/_jsxDEV(FileText, {\n                    size: 60\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 484,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 483,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: \"PDF preview not available\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 486,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  style: {\n                    fontSize: '0.9rem',\n                    marginTop: '10px'\n                  },\n                  children: \"Drag watermarks to position them on your PDF\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 487,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 482,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 474,\n              columnNumber: 17\n            }, this) : /*#__PURE__*/_jsxDEV(PDFPlaceholder, {\n              children: [/*#__PURE__*/_jsxDEV(PDFIcon, {\n                children: /*#__PURE__*/_jsxDEV(FileText, {\n                  size: 60\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 495,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 494,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: \"PDF preview will appear here\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 497,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  fontSize: '0.9rem',\n                  marginTop: '10px'\n                },\n                children: \"Drag watermarks to position them on your PDF\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 498,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 493,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 465,\n            columnNumber: 13\n          }, this), localWatermarks.map(watermark => {\n            const position = getWatermarkPosition(watermark);\n            return /*#__PURE__*/_jsxDEV(DraggableWatermark, {\n              style: {\n                left: position.x,\n                top: position.y\n              },\n              className: draggedElement === watermark.id ? 'dragging' : '',\n              fontSize: watermark.font_size,\n              color: watermark.color,\n              opacity: watermark.opacity,\n              rotation: watermark.rotation,\n              onMouseDown: e => handleMouseDown(e, watermark.id),\n              whileHover: {\n                scale: 1.05\n              },\n              whileTap: {\n                scale: 0.95\n              },\n              children: [watermark.text, /*#__PURE__*/_jsxDEV(WatermarkHandle, {\n                onClick: e => {\n                  e.stopPropagation();\n                  // Remove watermark from local state\n                  setLocalWatermarks(prev => prev.filter(w => w.id !== watermark.id));\n                  // Notify parent to remove watermark\n                  if (onRemoveWatermark) {\n                    onRemoveWatermark(watermark.id);\n                  }\n                },\n                children: \"\\xD7\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 524,\n                columnNumber: 19\n              }, this)]\n            }, watermark.id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 508,\n              columnNumber: 17\n            }, this);\n          })]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 464,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 463,\n        columnNumber: 9\n      }, this), positionIndicator.visible && /*#__PURE__*/_jsxDEV(PositionIndicator, {\n        children: [\"X: \", Math.round(positionIndicator.x), \", Y: \", Math.round(positionIndicator.y)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 544,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 462,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Controls, {\n      children: [/*#__PURE__*/_jsxDEV(Button, {\n        className: \"secondary\",\n        onClick: resetPositions,\n        whileHover: {\n          scale: 1.05\n        },\n        whileTap: {\n          scale: 0.95\n        },\n        children: [/*#__PURE__*/_jsxDEV(RotateCcw, {\n          size: 16\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 557,\n          columnNumber: 11\n        }, this), \"Reset Positions\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 551,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        className: \"primary\",\n        onClick: onClose,\n        whileHover: {\n          scale: 1.05\n        },\n        whileTap: {\n          scale: 0.95\n        },\n        children: [/*#__PURE__*/_jsxDEV(Save, {\n          size: 16\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 566,\n          columnNumber: 11\n        }, this), \"Save Positions\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 560,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 550,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 430,\n    columnNumber: 5\n  }, this);\n}\n_s(VisualPositioning, \"5CTIs3SSKA4gk+63+bT3zMqYt6w=\");\n_c19 = VisualPositioning;\nexport default VisualPositioning;\nvar _c, _c2, _c3, _c4, _c5, _c6, _c7, _c8, _c9, _c0, _c1, _c10, _c11, _c12, _c13, _c14, _c15, _c16, _c17, _c18, _c19;\n$RefreshReg$(_c, \"PositioningContainer\");\n$RefreshReg$(_c2, \"Header\");\n$RefreshReg$(_c3, \"Title\");\n$RefreshReg$(_c4, \"CloseButton\");\n$RefreshReg$(_c5, \"Instructions\");\n$RefreshReg$(_c6, \"InstructionsTitle\");\n$RefreshReg$(_c7, \"InstructionsList\");\n$RefreshReg$(_c8, \"InstructionItem\");\n$RefreshReg$(_c9, \"PreviewContainer\");\n$RefreshReg$(_c0, \"PDFPreview\");\n$RefreshReg$(_c1, \"PDFContent\");\n$RefreshReg$(_c10, \"PDFBackground\");\n$RefreshReg$(_c11, \"PDFImage\");\n$RefreshReg$(_c12, \"PDFPlaceholder\");\n$RefreshReg$(_c13, \"PDFIcon\");\n$RefreshReg$(_c14, \"DraggableWatermark\");\n$RefreshReg$(_c15, \"WatermarkHandle\");\n$RefreshReg$(_c16, \"PositionIndicator\");\n$RefreshReg$(_c17, \"Controls\");\n$RefreshReg$(_c18, \"Button\");\n$RefreshReg$(_c19, \"VisualPositioning\");","map":{"version":3,"names":["React","useState","useRef","useEffect","motion","styled","X","Eye","Save","RotateCcw","Move","Target","FileText","jsxDEV","_jsxDEV","PositioningContainer","div","_c","Header","_c2","Title","h2","_c3","CloseButton","button","_c4","Instructions","_c5","InstructionsTitle","h3","_c6","InstructionsList","ul","_c7","InstructionItem","li","_c8","PreviewContainer","_c9","PDFPreview","_c0","PDFContent","_c1","PDFBackground","_c10","PDFImage","object","_c11","PDFPlaceholder","_c12","PDFIcon","_c13","DraggableWatermark","props","fontSize","color","opacity","rotation","_c14","WatermarkHandle","_c15","PositionIndicator","_c16","Controls","_c17","Button","_c18","VisualPositioning","watermarks","onUpdateProperty","onRemoveWatermark","onClose","currentFileId","apiBaseUrl","_s","isDragging","setIsDragging","draggedElement","setDraggedElement","dragOffset","setDragOffset","x","y","positionIndicator","setPositionIndicator","visible","pdfUrl","setPdfUrl","pdfLoading","setPdfLoading","localWatermarks","setLocalWatermarks","previewRef","handleMouseDown","e","watermarkId","preventDefault","rect","currentTarget","getBoundingClientRect","previewRect","current","clientX","left","clientY","top","handleMouseMove","constrainedX","Math","max","min","width","constrainedY","height","pdfX","pdfY","console","log","round","prev","map","w","id","position","custom_x","custom_y","handleMouseUp","watermark","find","handleMouseMoveEvent","handleMouseUpEvent","document","addEventListener","removeEventListener","getWatermarkPosition","_previewRef$current","undefined","centerX","centerY","margin","positions","center","resetPositions","forEach","uniqueWatermarks","filter","index","self","findIndex","children","size","fileName","_jsxFileName","lineNumber","columnNumber","onClick","ref","data","type","onError","style","marginTop","className","font_size","onMouseDown","whileHover","scale","whileTap","text","stopPropagation","_c19","$RefreshReg$"],"sources":["/Users/ashishrajshekhar/Desktop/ASU/Fall 2025/watermark_service/frontend/src/components/VisualPositioning.js"],"sourcesContent":["import React, { useState, useRef, useEffect } from 'react';\nimport { motion } from 'framer-motion';\nimport styled from 'styled-components';\nimport { X, Eye, Save, RotateCcw, Move, Target, FileText } from 'lucide-react';\n\nconst PositioningContainer = styled.div`\n  position: relative;\n`;\n\nconst Header = styled.div`\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 30px;\n`;\n\nconst Title = styled.h2`\n  font-size: 1.8rem;\n  font-weight: 600;\n  color: #1a202c;\n  display: flex;\n  align-items: center;\n  gap: 10px;\n`;\n\nconst CloseButton = styled.button`\n  background: #fed7d7;\n  color: #c53030;\n  border: none;\n  border-radius: 8px;\n  padding: 12px;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: all 0.3s ease;\n\n  &:hover {\n    background: #feb2b2;\n    transform: scale(1.1);\n  }\n`;\n\nconst Instructions = styled.div`\n  background: #ebf8ff;\n  border: 1px solid #bee3f8;\n  border-radius: 12px;\n  padding: 20px;\n  margin-bottom: 30px;\n`;\n\nconst InstructionsTitle = styled.h3`\n  font-size: 1.1rem;\n  font-weight: 600;\n  color: #2b6cb0;\n  margin-bottom: 15px;\n  display: flex;\n  align-items: center;\n  gap: 8px;\n`;\n\nconst InstructionsList = styled.ul`\n  list-style: none;\n  padding: 0;\n  margin: 0;\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));\n  gap: 10px;\n`;\n\nconst InstructionItem = styled.li`\n  color: #4a5568;\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  font-size: 0.9rem;\n\n  &:before {\n    content: \"â€¢\";\n    color: #667eea;\n    font-weight: bold;\n  }\n`;\n\nconst PreviewContainer = styled.div`\n  position: relative;\n  background: #f8fafc;\n  border: 2px solid #e2e8f0;\n  border-radius: 12px;\n  padding: 20px;\n  min-height: 600px;\n  overflow: hidden;\n`;\n\nconst PDFPreview = styled.div`\n  position: relative;\n  width: 100%;\n  height: 560px;\n  background: white;\n  border: 1px solid #e2e8f0;\n  border-radius: 8px;\n  overflow: hidden;\n  box-shadow: 0 4px 12px rgba(0,0,0,0.1);\n`;\n\nconst PDFContent = styled.div`\n  width: 100%;\n  height: 100%;\n  background: \n    linear-gradient(45deg, #f0f0f0 25%, transparent 25%), \n    linear-gradient(-45deg, #f0f0f0 25%, transparent 25%), \n    linear-gradient(45deg, transparent 75%, #f0f0f0 75%), \n    linear-gradient(-45deg, transparent 75%, #f0f0f0 75%);\n  background-size: 20px 20px;\n  background-position: 0 0, 0 10px, 10px -10px, -10px 0px;\n  position: relative;\n  overflow: hidden;\n`;\n\nconst PDFBackground = styled.div`\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background: white;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  z-index: 1;\n`;\n\nconst PDFImage = styled.object`\n  max-width: 100%;\n  max-height: 100%;\n  object-fit: contain;\n  box-shadow: 0 4px 12px rgba(0,0,0,0.1);\n  border: 1px solid #e2e8f0;\n  border-radius: 4px;\n`;\n\nconst PDFPlaceholder = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  height: 100%;\n  color: #718096;\n  font-size: 1.1rem;\n  text-align: center;\n  padding: 20px;\n`;\n\nconst PDFIcon = styled.div`\n  font-size: 3rem;\n  margin-bottom: 15px;\n  color: #cbd5e0;\n`;\n\nconst DraggableWatermark = styled(motion.div)`\n  position: absolute;\n  cursor: move;\n  user-select: none;\n  padding: 8px 12px;\n  border-radius: 6px;\n  background: rgba(102, 126, 234, 0.9);\n  color: white;\n  font-weight: 600;\n  font-size: ${props => props.fontSize}px;\n  color: ${props => props.color};\n  opacity: ${props => props.opacity};\n  transform: rotate(${props => props.rotation}deg);\n  box-shadow: 0 4px 12px rgba(0,0,0,0.2);\n  border: 2px solid rgba(255,255,255,0.3);\n  z-index: 20;\n  transition: all 0.3s ease;\n  backdrop-filter: blur(2px);\n\n  &:hover {\n    box-shadow: 0 6px 20px rgba(0,0,0,0.3);\n    transform: rotate(${props => props.rotation}deg) scale(1.05);\n  }\n\n  &.dragging {\n    z-index: 100;\n    box-shadow: 0 8px 25px rgba(0,0,0,0.4);\n  }\n`;\n\nconst WatermarkHandle = styled.div`\n  position: absolute;\n  top: -8px;\n  right: -8px;\n  width: 20px;\n  height: 20px;\n  background: #c53030;\n  border-radius: 50%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  cursor: pointer;\n  color: white;\n  font-size: 12px;\n  font-weight: bold;\n  box-shadow: 0 2px 6px rgba(0,0,0,0.3);\n  transition: all 0.3s ease;\n\n  &:hover {\n    background: #e53e3e;\n    transform: scale(1.2);\n  }\n`;\n\nconst PositionIndicator = styled.div`\n  position: absolute;\n  top: 10px;\n  right: 10px;\n  background: rgba(0,0,0,0.8);\n  color: white;\n  padding: 8px 12px;\n  border-radius: 6px;\n  font-size: 0.8rem;\n  font-weight: 600;\n  z-index: 50;\n  pointer-events: none;\n`;\n\nconst Controls = styled.div`\n  display: flex;\n  justify-content: center;\n  gap: 15px;\n  margin-top: 20px;\n`;\n\nconst Button = styled(motion.button)`\n  padding: 12px 24px;\n  border: none;\n  border-radius: 8px;\n  font-weight: 600;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  transition: all 0.3s ease;\n\n  &.primary {\n    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n    color: white;\n    \n    &:hover {\n      transform: translateY(-2px);\n      box-shadow: 0 8px 25px rgba(102, 126, 234, 0.3);\n    }\n  }\n\n  &.secondary {\n    background: #f7fafc;\n    color: #4a5568;\n    border: 2px solid #e2e8f0;\n    \n    &:hover {\n      background: #edf2f7;\n      border-color: #cbd5e0;\n    }\n  }\n`;\n\nfunction VisualPositioning({ watermarks, onUpdateProperty, onRemoveWatermark, onClose, currentFileId, apiBaseUrl }) {\n  const [isDragging, setIsDragging] = useState(false);\n  const [draggedElement, setDraggedElement] = useState(null);\n  const [dragOffset, setDragOffset] = useState({ x: 0, y: 0 });\n  const [positionIndicator, setPositionIndicator] = useState({ x: 0, y: 0, visible: false });\n  const [pdfUrl, setPdfUrl] = useState(null);\n  const [pdfLoading, setPdfLoading] = useState(false);\n  const [localWatermarks, setLocalWatermarks] = useState(watermarks);\n  const previewRef = useRef(null);\n\n  const handleMouseDown = (e, watermarkId) => {\n    e.preventDefault();\n    setIsDragging(true);\n    setDraggedElement(watermarkId);\n    \n    const rect = e.currentTarget.getBoundingClientRect();\n    const previewRect = previewRef.current.getBoundingClientRect();\n    \n    setDragOffset({\n      x: e.clientX - rect.left,\n      y: e.clientY - rect.top\n    });\n  };\n\n  const handleMouseMove = (e) => {\n    if (!isDragging || !draggedElement) return;\n\n    const previewRect = previewRef.current.getBoundingClientRect();\n    const x = e.clientX - previewRect.left - dragOffset.x;\n    const y = e.clientY - previewRect.top - dragOffset.y;\n\n    // Constrain to preview bounds\n    const constrainedX = Math.max(0, Math.min(x, previewRect.width - 100));\n    const constrainedY = Math.max(0, Math.min(y, previewRect.height - 50));\n\n    // Update position indicator\n    setPositionIndicator({\n      x: constrainedX,\n      y: constrainedY,\n      visible: true\n    });\n\n    // Convert to PDF coordinates (assuming A4 ratio)\n    const pdfX = (constrainedX / previewRect.width) * 595; // A4 width in points\n    const pdfY = (constrainedY / previewRect.height) * 842; // A4 height in points\n    \n    console.log(`Dragging watermark ${draggedElement} to PDF coordinates: x=${Math.round(pdfX)}, y=${Math.round(pdfY)}`); // Debug\n\n    // Update local state immediately for real-time feedback\n    setLocalWatermarks(prev => prev.map(w => \n      w.id === draggedElement \n        ? { \n            ...w, \n            position: 'custom',\n            custom_x: Math.round(pdfX),\n            custom_y: Math.round(pdfY)\n          }\n        : w\n    ));\n  };\n\n  const handleMouseUp = () => {\n    if (draggedElement) {\n      // Send final position to backend\n      const watermark = localWatermarks.find(w => w.id === draggedElement);\n      if (watermark && watermark.position === 'custom') {\n        onUpdateProperty(draggedElement, 'position', 'custom');\n        onUpdateProperty(draggedElement, 'custom_x', watermark.custom_x);\n        onUpdateProperty(draggedElement, 'custom_y', watermark.custom_y);\n      }\n    }\n    \n    setIsDragging(false);\n    setDraggedElement(null);\n    setPositionIndicator(prev => ({ ...prev, visible: false }));\n  };\n\n  useEffect(() => {\n    if (isDragging) {\n      const handleMouseMoveEvent = (e) => handleMouseMove(e);\n      const handleMouseUpEvent = () => handleMouseUp();\n      \n      document.addEventListener('mousemove', handleMouseMoveEvent);\n      document.addEventListener('mouseup', handleMouseUpEvent);\n      \n      return () => {\n        document.removeEventListener('mousemove', handleMouseMoveEvent);\n        document.removeEventListener('mouseup', handleMouseUpEvent);\n      };\n    }\n  }, [isDragging, draggedElement, dragOffset]);\n\n  const getWatermarkPosition = (watermark) => {\n    const previewRect = previewRef.current?.getBoundingClientRect();\n    if (!previewRect) {\n      return { x: 250, y: 250 }; // Default center position\n    }\n\n    if (watermark.position === 'custom' && watermark.custom_x !== undefined && watermark.custom_y !== undefined) {\n      // Convert PDF coordinates back to screen coordinates\n      const x = (watermark.custom_x / 595) * previewRect.width;\n      const y = (watermark.custom_y / 842) * previewRect.height;\n      console.log(`Watermark ${watermark.id} custom position: PDF(${watermark.custom_x}, ${watermark.custom_y}) -> Screen(${x}, ${y})`);\n      return { x, y };\n    }\n    \n    // Default positions based on preview size\n    const centerX = previewRect.width / 2;\n    const centerY = previewRect.height / 2;\n    const margin = 50;\n    \n    const positions = {\n      'top-left': { x: margin, y: margin },\n      'top-center': { x: centerX, y: margin },\n      'top-right': { x: previewRect.width - margin, y: margin },\n      'center-left': { x: margin, y: centerY },\n      'center': { x: centerX, y: centerY },\n      'center-right': { x: previewRect.width - margin, y: centerY },\n      'bottom-left': { x: margin, y: previewRect.height - margin },\n      'bottom-center': { x: centerX, y: previewRect.height - margin },\n      'bottom-right': { x: previewRect.width - margin, y: previewRect.height - margin }\n    };\n    \n    return positions[watermark.position] || positions.center;\n  };\n\n  const resetPositions = () => {\n    localWatermarks.forEach(watermark => {\n      onUpdateProperty(watermark.id, 'position', 'center');\n      onUpdateProperty(watermark.id, 'custom_x', '');\n      onUpdateProperty(watermark.id, 'custom_y', '');\n    });\n    \n    // Update local state\n    setLocalWatermarks(prev => prev.map(w => ({\n      ...w,\n      position: 'center',\n      custom_x: '',\n      custom_y: ''\n    })));\n  };\n\n  // Load PDF for visual positioning\n  useEffect(() => {\n    if (currentFileId && apiBaseUrl) {\n      setPdfLoading(true);\n      // Use the preview endpoint to get the PDF for visual positioning\n      setPdfUrl(`${apiBaseUrl}/preview/${currentFileId}`);\n      setPdfLoading(false);\n    }\n  }, [currentFileId, apiBaseUrl]);\n\n  // Sync local watermarks with props and remove duplicates\n  useEffect(() => {\n    // Remove duplicates based on ID\n    const uniqueWatermarks = watermarks.filter((watermark, index, self) => \n      index === self.findIndex(w => w.id === watermark.id)\n    );\n    setLocalWatermarks(uniqueWatermarks);\n  }, [watermarks]);\n\n  return (\n    <PositioningContainer>\n      <Header>\n        <Title>\n          <Eye size={24} />\n          Visual Watermark Positioning\n        </Title>\n        <CloseButton onClick={onClose}>\n          <X size={20} />\n        </CloseButton>\n      </Header>\n\n      <Instructions>\n        <InstructionsTitle>\n          <Target size={20} />\n          Drag and Drop Instructions\n        </InstructionsTitle>\n        <InstructionsList>\n          <InstructionItem>\n            <Move size={16} />\n            Click and drag watermarks to position them anywhere on the PDF\n          </InstructionItem>\n          <InstructionItem>\n            <Target size={16} />\n            Watch the coordinates update in real-time as you drag\n          </InstructionItem>\n          <InstructionItem>\n            <Save size={16} />\n            Click 'Save Positions' to apply your changes\n          </InstructionItem>\n        </InstructionsList>\n      </Instructions>\n\n      <PreviewContainer>\n        <PDFPreview ref={previewRef}>\n          <PDFContent>\n            <PDFBackground>\n              {pdfLoading ? (\n                <PDFPlaceholder>\n                  <PDFIcon>\n                    <FileText size={60} />\n                  </PDFIcon>\n                  <div>Loading PDF preview...</div>\n                </PDFPlaceholder>\n              ) : pdfUrl ? (\n                <PDFImage \n                  data={pdfUrl} \n                  type=\"application/pdf\"\n                  onError={() => {\n                    // Fallback to placeholder if PDF loading fails\n                    setPdfUrl(null);\n                  }}\n                >\n                  <PDFPlaceholder>\n                    <PDFIcon>\n                      <FileText size={60} />\n                    </PDFIcon>\n                    <div>PDF preview not available</div>\n                    <div style={{ fontSize: '0.9rem', marginTop: '10px' }}>\n                      Drag watermarks to position them on your PDF\n                    </div>\n                  </PDFPlaceholder>\n                </PDFImage>\n              ) : (\n                <PDFPlaceholder>\n                  <PDFIcon>\n                    <FileText size={60} />\n                  </PDFIcon>\n                  <div>PDF preview will appear here</div>\n                  <div style={{ fontSize: '0.9rem', marginTop: '10px' }}>\n                    Drag watermarks to position them on your PDF\n                  </div>\n                </PDFPlaceholder>\n              )}\n            </PDFBackground>\n            \n            {localWatermarks.map((watermark) => {\n              const position = getWatermarkPosition(watermark);\n              return (\n                <DraggableWatermark\n                  key={watermark.id}\n                  style={{\n                    left: position.x,\n                    top: position.y\n                  }}\n                  className={draggedElement === watermark.id ? 'dragging' : ''}\n                  fontSize={watermark.font_size}\n                  color={watermark.color}\n                  opacity={watermark.opacity}\n                  rotation={watermark.rotation}\n                  onMouseDown={(e) => handleMouseDown(e, watermark.id)}\n                  whileHover={{ scale: 1.05 }}\n                  whileTap={{ scale: 0.95 }}\n                >\n                  {watermark.text}\n                  <WatermarkHandle\n                    onClick={(e) => {\n                      e.stopPropagation();\n                      // Remove watermark from local state\n                      setLocalWatermarks(prev => prev.filter(w => w.id !== watermark.id));\n                      // Notify parent to remove watermark\n                      if (onRemoveWatermark) {\n                        onRemoveWatermark(watermark.id);\n                      }\n                    }}\n                  >\n                    Ã—\n                  </WatermarkHandle>\n                </DraggableWatermark>\n              );\n            })}\n          </PDFContent>\n        </PDFPreview>\n\n        {positionIndicator.visible && (\n          <PositionIndicator>\n            X: {Math.round(positionIndicator.x)}, Y: {Math.round(positionIndicator.y)}\n          </PositionIndicator>\n        )}\n      </PreviewContainer>\n\n      <Controls>\n        <Button\n          className=\"secondary\"\n          onClick={resetPositions}\n          whileHover={{ scale: 1.05 }}\n          whileTap={{ scale: 0.95 }}\n        >\n          <RotateCcw size={16} />\n          Reset Positions\n        </Button>\n        <Button\n          className=\"primary\"\n          onClick={onClose}\n          whileHover={{ scale: 1.05 }}\n          whileTap={{ scale: 0.95 }}\n        >\n          <Save size={16} />\n          Save Positions\n        </Button>\n      </Controls>\n    </PositioningContainer>\n  );\n}\n\nexport default VisualPositioning;\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,MAAM,EAAEC,SAAS,QAAQ,OAAO;AAC1D,SAASC,MAAM,QAAQ,eAAe;AACtC,OAAOC,MAAM,MAAM,mBAAmB;AACtC,SAASC,CAAC,EAAEC,GAAG,EAAEC,IAAI,EAAEC,SAAS,EAAEC,IAAI,EAAEC,MAAM,EAAEC,QAAQ,QAAQ,cAAc;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAE/E,MAAMC,oBAAoB,GAAGV,MAAM,CAACW,GAAG;AACvC;AACA,CAAC;AAACC,EAAA,GAFIF,oBAAoB;AAI1B,MAAMG,MAAM,GAAGb,MAAM,CAACW,GAAG;AACzB;AACA;AACA;AACA;AACA,CAAC;AAACG,GAAA,GALID,MAAM;AAOZ,MAAME,KAAK,GAAGf,MAAM,CAACgB,EAAE;AACvB;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAACC,GAAA,GAPIF,KAAK;AASX,MAAMG,WAAW,GAAGlB,MAAM,CAACmB,MAAM;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAACC,GAAA,GAhBIF,WAAW;AAkBjB,MAAMG,YAAY,GAAGrB,MAAM,CAACW,GAAG;AAC/B;AACA;AACA;AACA;AACA;AACA,CAAC;AAACW,GAAA,GANID,YAAY;AAQlB,MAAME,iBAAiB,GAAGvB,MAAM,CAACwB,EAAE;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAACC,GAAA,GARIF,iBAAiB;AAUvB,MAAMG,gBAAgB,GAAG1B,MAAM,CAAC2B,EAAE;AAClC;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAACC,GAAA,GAPIF,gBAAgB;AAStB,MAAMG,eAAe,GAAG7B,MAAM,CAAC8B,EAAE;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAACC,GAAA,GAZIF,eAAe;AAcrB,MAAMG,gBAAgB,GAAGhC,MAAM,CAACW,GAAG;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAACsB,GAAA,GARID,gBAAgB;AAUtB,MAAME,UAAU,GAAGlC,MAAM,CAACW,GAAG;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAACwB,GAAA,GATID,UAAU;AAWhB,MAAME,UAAU,GAAGpC,MAAM,CAACW,GAAG;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAAC0B,GAAA,GAZID,UAAU;AAchB,MAAME,aAAa,GAAGtC,MAAM,CAACW,GAAG;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAAC4B,IAAA,GAXID,aAAa;AAanB,MAAME,QAAQ,GAAGxC,MAAM,CAACyC,MAAM;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAACC,IAAA,GAPIF,QAAQ;AASd,MAAMG,cAAc,GAAG3C,MAAM,CAACW,GAAG;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAACiC,IAAA,GAVID,cAAc;AAYpB,MAAME,OAAO,GAAG7C,MAAM,CAACW,GAAG;AAC1B;AACA;AACA;AACA,CAAC;AAACmC,IAAA,GAJID,OAAO;AAMb,MAAME,kBAAkB,GAAG/C,MAAM,CAACD,MAAM,CAACY,GAAG,CAAC;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAeqC,KAAK,IAAIA,KAAK,CAACC,QAAQ;AACtC,WAAWD,KAAK,IAAIA,KAAK,CAACE,KAAK;AAC/B,aAAaF,KAAK,IAAIA,KAAK,CAACG,OAAO;AACnC,sBAAsBH,KAAK,IAAIA,KAAK,CAACI,QAAQ;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwBJ,KAAK,IAAIA,KAAK,CAACI,QAAQ;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAACC,IAAA,GA5BIN,kBAAkB;AA8BxB,MAAMO,eAAe,GAAGtD,MAAM,CAACW,GAAG;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}