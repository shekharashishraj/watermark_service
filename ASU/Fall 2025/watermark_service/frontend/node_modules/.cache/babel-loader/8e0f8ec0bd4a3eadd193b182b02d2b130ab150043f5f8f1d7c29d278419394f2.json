{"ast":null,"code":"var _jsxFileName = \"/Users/ashishrajshekhar/Desktop/ASU/Fall 2025/watermark_service/frontend/src/components/VisualPositioning.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useRef, useEffect } from 'react';\nimport { motion } from 'framer-motion';\nimport styled from 'styled-components';\nimport { X, Eye, Save, RotateCcw, Move, Target, FileText } from 'lucide-react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst PositioningContainer = styled.div`\n  position: relative;\n`;\n_c = PositioningContainer;\nconst Header = styled.div`\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 30px;\n`;\n_c2 = Header;\nconst Title = styled.h2`\n  font-size: 1.8rem;\n  font-weight: 600;\n  color: #1a202c;\n  display: flex;\n  align-items: center;\n  gap: 10px;\n`;\n_c3 = Title;\nconst CloseButton = styled.button`\n  background: #fed7d7;\n  color: #c53030;\n  border: none;\n  border-radius: 8px;\n  padding: 12px;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: all 0.3s ease;\n\n  &:hover {\n    background: #feb2b2;\n    transform: scale(1.1);\n  }\n`;\n_c4 = CloseButton;\nconst Instructions = styled.div`\n  background: #ebf8ff;\n  border: 1px solid #bee3f8;\n  border-radius: 12px;\n  padding: 20px;\n  margin-bottom: 30px;\n`;\n_c5 = Instructions;\nconst InstructionsTitle = styled.h3`\n  font-size: 1.1rem;\n  font-weight: 600;\n  color: #2b6cb0;\n  margin-bottom: 15px;\n  display: flex;\n  align-items: center;\n  gap: 8px;\n`;\n_c6 = InstructionsTitle;\nconst InstructionsList = styled.ul`\n  list-style: none;\n  padding: 0;\n  margin: 0;\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));\n  gap: 10px;\n`;\n_c7 = InstructionsList;\nconst InstructionItem = styled.li`\n  color: #4a5568;\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  font-size: 0.9rem;\n\n  &:before {\n    content: \"•\";\n    color: #667eea;\n    font-weight: bold;\n  }\n`;\n_c8 = InstructionItem;\nconst PreviewContainer = styled.div`\n  position: relative;\n  background: #f8fafc;\n  border: 2px solid #e2e8f0;\n  border-radius: 12px;\n  padding: 20px;\n  min-height: 600px;\n  overflow: hidden;\n`;\n_c9 = PreviewContainer;\nconst PDFPreview = styled.div`\n  position: relative;\n  width: 100%;\n  height: 560px;\n  background: white;\n  border: 1px solid #e2e8f0;\n  border-radius: 8px;\n  overflow: hidden;\n  box-shadow: 0 4px 12px rgba(0,0,0,0.1);\n`;\n_c0 = PDFPreview;\nconst PDFContent = styled.div`\n  width: 100%;\n  height: 100%;\n  background: \n    linear-gradient(45deg, #f0f0f0 25%, transparent 25%), \n    linear-gradient(-45deg, #f0f0f0 25%, transparent 25%), \n    linear-gradient(45deg, transparent 75%, #f0f0f0 75%), \n    linear-gradient(-45deg, transparent 75%, #f0f0f0 75%);\n  background-size: 20px 20px;\n  background-position: 0 0, 0 10px, 10px -10px, -10px 0px;\n  position: relative;\n  overflow: hidden;\n`;\n_c1 = PDFContent;\nconst PDFBackground = styled.div`\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background: white;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  z-index: 1;\n`;\n_c10 = PDFBackground;\nconst PDFImage = styled.object`\n  max-width: 100%;\n  max-height: 100%;\n  object-fit: contain;\n  box-shadow: 0 4px 12px rgba(0,0,0,0.1);\n  border: 1px solid #e2e8f0;\n  border-radius: 4px;\n`;\n_c11 = PDFImage;\nconst PDFPlaceholder = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  height: 100%;\n  color: #718096;\n  font-size: 1.1rem;\n  text-align: center;\n  padding: 20px;\n`;\n_c12 = PDFPlaceholder;\nconst PDFIcon = styled.div`\n  font-size: 3rem;\n  margin-bottom: 15px;\n  color: #cbd5e0;\n`;\n_c13 = PDFIcon;\nconst DraggableWatermark = styled(motion.div)`\n  position: absolute;\n  cursor: move;\n  user-select: none;\n  padding: 8px 12px;\n  border-radius: 6px;\n  background: rgba(102, 126, 234, 0.9);\n  color: white;\n  font-weight: 600;\n  font-size: ${props => props.fontSize}px;\n  color: ${props => props.color};\n  opacity: ${props => props.opacity};\n  transform: rotate(${props => props.rotation}deg);\n  box-shadow: 0 4px 12px rgba(0,0,0,0.2);\n  border: 2px solid rgba(255,255,255,0.3);\n  z-index: 20;\n  transition: all 0.3s ease;\n  backdrop-filter: blur(2px);\n\n  &:hover {\n    box-shadow: 0 6px 20px rgba(0,0,0,0.3);\n    transform: rotate(${props => props.rotation}deg) scale(1.05);\n  }\n\n  &.dragging {\n    z-index: 100;\n    box-shadow: 0 8px 25px rgba(0,0,0,0.4);\n  }\n`;\n_c14 = DraggableWatermark;\nconst WatermarkHandle = styled.div`\n  position: absolute;\n  top: -8px;\n  right: -8px;\n  width: 20px;\n  height: 20px;\n  background: #c53030;\n  border-radius: 50%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  cursor: pointer;\n  color: white;\n  font-size: 12px;\n  font-weight: bold;\n  box-shadow: 0 2px 6px rgba(0,0,0,0.3);\n  transition: all 0.3s ease;\n\n  &:hover {\n    background: #e53e3e;\n    transform: scale(1.2);\n  }\n`;\n_c15 = WatermarkHandle;\nconst PositionIndicator = styled.div`\n  position: absolute;\n  top: 10px;\n  right: 10px;\n  background: rgba(0,0,0,0.8);\n  color: white;\n  padding: 8px 12px;\n  border-radius: 6px;\n  font-size: 0.8rem;\n  font-weight: 600;\n  z-index: 50;\n  pointer-events: none;\n`;\n_c16 = PositionIndicator;\nconst Controls = styled.div`\n  display: flex;\n  justify-content: center;\n  gap: 15px;\n  margin-top: 20px;\n`;\n_c17 = Controls;\nconst Button = styled(motion.button)`\n  padding: 12px 24px;\n  border: none;\n  border-radius: 8px;\n  font-weight: 600;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  transition: all 0.3s ease;\n\n  &.primary {\n    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n    color: white;\n    \n    &:hover {\n      transform: translateY(-2px);\n      box-shadow: 0 8px 25px rgba(102, 126, 234, 0.3);\n    }\n  }\n\n  &.secondary {\n    background: #f7fafc;\n    color: #4a5568;\n    border: 2px solid #e2e8f0;\n    \n    &:hover {\n      background: #edf2f7;\n      border-color: #cbd5e0;\n    }\n  }\n`;\n_c18 = Button;\nfunction VisualPositioning({\n  watermarks,\n  onUpdateProperty,\n  onClose,\n  currentFileId,\n  apiBaseUrl\n}) {\n  _s();\n  const [isDragging, setIsDragging] = useState(false);\n  const [draggedElement, setDraggedElement] = useState(null);\n  const [dragOffset, setDragOffset] = useState({\n    x: 0,\n    y: 0\n  });\n  const [positionIndicator, setPositionIndicator] = useState({\n    x: 0,\n    y: 0,\n    visible: false\n  });\n  const [pdfUrl, setPdfUrl] = useState(null);\n  const [pdfLoading, setPdfLoading] = useState(false);\n  const [localWatermarks, setLocalWatermarks] = useState(watermarks);\n  const previewRef = useRef(null);\n  const handleMouseDown = (e, watermarkId) => {\n    e.preventDefault();\n    setIsDragging(true);\n    setDraggedElement(watermarkId);\n    const rect = e.currentTarget.getBoundingClientRect();\n    const previewRect = previewRef.current.getBoundingClientRect();\n    setDragOffset({\n      x: e.clientX - rect.left,\n      y: e.clientY - rect.top\n    });\n  };\n  const handleMouseMove = e => {\n    if (!isDragging || !draggedElement) return;\n    const previewRect = previewRef.current.getBoundingClientRect();\n    const x = e.clientX - previewRect.left - dragOffset.x;\n    const y = e.clientY - previewRect.top - dragOffset.y;\n\n    // Constrain to preview bounds\n    const constrainedX = Math.max(0, Math.min(x, previewRect.width - 100));\n    const constrainedY = Math.max(0, Math.min(y, previewRect.height - 50));\n\n    // Update position indicator\n    setPositionIndicator({\n      x: constrainedX,\n      y: constrainedY,\n      visible: true\n    });\n\n    // Convert to PDF coordinates (assuming A4 ratio)\n    const pdfX = constrainedX / previewRect.width * 595; // A4 width in points\n    const pdfY = constrainedY / previewRect.height * 842; // A4 height in points\n\n    console.log(`Dragging watermark ${draggedElement} to PDF coordinates: x=${Math.round(pdfX)}, y=${Math.round(pdfY)}`); // Debug\n\n    // Update local state immediately for real-time feedback\n    setLocalWatermarks(prev => prev.map(w => w.id === draggedElement ? {\n      ...w,\n      position: 'custom',\n      custom_x: Math.round(pdfX),\n      custom_y: Math.round(pdfY)\n    } : w));\n  };\n  const handleMouseUp = () => {\n    if (draggedElement) {\n      // Send final position to backend\n      const watermark = localWatermarks.find(w => w.id === draggedElement);\n      if (watermark && watermark.position === 'custom') {\n        onUpdateProperty(draggedElement, 'position', 'custom');\n        onUpdateProperty(draggedElement, 'custom_x', watermark.custom_x);\n        onUpdateProperty(draggedElement, 'custom_y', watermark.custom_y);\n      }\n    }\n    setIsDragging(false);\n    setDraggedElement(null);\n    setPositionIndicator(prev => ({\n      ...prev,\n      visible: false\n    }));\n  };\n  useEffect(() => {\n    if (isDragging) {\n      document.addEventListener('mousemove', handleMouseMove);\n      document.addEventListener('mouseup', handleMouseUp);\n      return () => {\n        document.removeEventListener('mousemove', handleMouseMove);\n        document.removeEventListener('mouseup', handleMouseUp);\n      };\n    }\n  }, [isDragging, draggedElement, dragOffset, handleMouseMove, handleMouseUp]);\n  const getWatermarkPosition = watermark => {\n    if (watermark.position === 'custom' && watermark.custom_x !== undefined && watermark.custom_y !== undefined) {\n      var _previewRef$current;\n      const previewRect = (_previewRef$current = previewRef.current) === null || _previewRef$current === void 0 ? void 0 : _previewRef$current.getBoundingClientRect();\n      if (previewRect) {\n        // Convert PDF coordinates back to screen coordinates\n        const x = watermark.custom_x / 595 * previewRect.width;\n        const y = watermark.custom_y / 842 * previewRect.height;\n        return {\n          x,\n          y\n        };\n      }\n    }\n\n    // Default positions\n    const positions = {\n      'top-left': {\n        x: 20,\n        y: 20\n      },\n      'top-center': {\n        x: 250,\n        y: 20\n      },\n      'top-right': {\n        x: 480,\n        y: 20\n      },\n      'center-left': {\n        x: 20,\n        y: 250\n      },\n      'center': {\n        x: 250,\n        y: 250\n      },\n      'center-right': {\n        x: 480,\n        y: 250\n      },\n      'bottom-left': {\n        x: 20,\n        y: 480\n      },\n      'bottom-center': {\n        x: 250,\n        y: 480\n      },\n      'bottom-right': {\n        x: 480,\n        y: 480\n      }\n    };\n    return positions[watermark.position] || positions.center;\n  };\n  const resetPositions = () => {\n    localWatermarks.forEach(watermark => {\n      onUpdateProperty(watermark.id, 'position', 'center');\n      onUpdateProperty(watermark.id, 'custom_x', '');\n      onUpdateProperty(watermark.id, 'custom_y', '');\n    });\n\n    // Update local state\n    setLocalWatermarks(prev => prev.map(w => ({\n      ...w,\n      position: 'center',\n      custom_x: '',\n      custom_y: ''\n    })));\n  };\n\n  // Load PDF for visual positioning\n  useEffect(() => {\n    if (currentFileId && apiBaseUrl) {\n      setPdfLoading(true);\n      // Use the preview endpoint to get the PDF for visual positioning\n      setPdfUrl(`${apiBaseUrl}/preview/${currentFileId}`);\n      setPdfLoading(false);\n    }\n  }, [currentFileId, apiBaseUrl]);\n\n  // Sync local watermarks with props and remove duplicates\n  useEffect(() => {\n    // Remove duplicates based on ID\n    const uniqueWatermarks = watermarks.filter((watermark, index, self) => index === self.findIndex(w => w.id === watermark.id));\n    setLocalWatermarks(uniqueWatermarks);\n  }, [watermarks]);\n  return /*#__PURE__*/_jsxDEV(PositioningContainer, {\n    children: [/*#__PURE__*/_jsxDEV(Header, {\n      children: [/*#__PURE__*/_jsxDEV(Title, {\n        children: [/*#__PURE__*/_jsxDEV(Eye, {\n          size: 24\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 423,\n          columnNumber: 11\n        }, this), \"Visual Watermark Positioning\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 422,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(CloseButton, {\n        onClick: onClose,\n        children: /*#__PURE__*/_jsxDEV(X, {\n          size: 20\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 427,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 426,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 421,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Instructions, {\n      children: [/*#__PURE__*/_jsxDEV(InstructionsTitle, {\n        children: [/*#__PURE__*/_jsxDEV(Target, {\n          size: 20\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 433,\n          columnNumber: 11\n        }, this), \"Drag and Drop Instructions\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 432,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(InstructionsList, {\n        children: [/*#__PURE__*/_jsxDEV(InstructionItem, {\n          children: [/*#__PURE__*/_jsxDEV(Move, {\n            size: 16\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 438,\n            columnNumber: 13\n          }, this), \"Click and drag watermarks to position them anywhere on the PDF\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 437,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(InstructionItem, {\n          children: [/*#__PURE__*/_jsxDEV(Target, {\n            size: 16\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 442,\n            columnNumber: 13\n          }, this), \"Watch the coordinates update in real-time as you drag\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 441,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(InstructionItem, {\n          children: [/*#__PURE__*/_jsxDEV(Save, {\n            size: 16\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 446,\n            columnNumber: 13\n          }, this), \"Click 'Save Positions' to apply your changes\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 445,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 436,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 431,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(PreviewContainer, {\n      children: [/*#__PURE__*/_jsxDEV(PDFPreview, {\n        ref: previewRef,\n        children: /*#__PURE__*/_jsxDEV(PDFContent, {\n          children: [/*#__PURE__*/_jsxDEV(PDFBackground, {\n            children: pdfLoading ? /*#__PURE__*/_jsxDEV(PDFPlaceholder, {\n              children: [/*#__PURE__*/_jsxDEV(PDFIcon, {\n                children: /*#__PURE__*/_jsxDEV(FileText, {\n                  size: 60\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 459,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 458,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: \"Loading PDF preview...\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 461,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 457,\n              columnNumber: 17\n            }, this) : pdfUrl ? /*#__PURE__*/_jsxDEV(PDFImage, {\n              data: pdfUrl,\n              type: \"application/pdf\",\n              onError: () => {\n                // Fallback to placeholder if PDF loading fails\n                setPdfUrl(null);\n              },\n              children: /*#__PURE__*/_jsxDEV(PDFPlaceholder, {\n                children: [/*#__PURE__*/_jsxDEV(PDFIcon, {\n                  children: /*#__PURE__*/_jsxDEV(FileText, {\n                    size: 60\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 474,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 473,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: \"PDF preview not available\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 476,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  style: {\n                    fontSize: '0.9rem',\n                    marginTop: '10px'\n                  },\n                  children: \"Drag watermarks to position them on your PDF\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 477,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 472,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 464,\n              columnNumber: 17\n            }, this) : /*#__PURE__*/_jsxDEV(PDFPlaceholder, {\n              children: [/*#__PURE__*/_jsxDEV(PDFIcon, {\n                children: /*#__PURE__*/_jsxDEV(FileText, {\n                  size: 60\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 485,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 484,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: \"PDF preview will appear here\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 487,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  fontSize: '0.9rem',\n                  marginTop: '10px'\n                },\n                children: \"Drag watermarks to position them on your PDF\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 488,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 483,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 455,\n            columnNumber: 13\n          }, this), localWatermarks.map(watermark => {\n            const position = getWatermarkPosition(watermark);\n            return /*#__PURE__*/_jsxDEV(DraggableWatermark, {\n              style: {\n                left: position.x,\n                top: position.y\n              },\n              className: draggedElement === watermark.id ? 'dragging' : '',\n              fontSize: watermark.font_size,\n              color: watermark.color,\n              opacity: watermark.opacity,\n              rotation: watermark.rotation,\n              onMouseDown: e => handleMouseDown(e, watermark.id),\n              whileHover: {\n                scale: 1.05\n              },\n              whileTap: {\n                scale: 0.95\n              },\n              children: [watermark.text, /*#__PURE__*/_jsxDEV(WatermarkHandle, {\n                onClick: e => {\n                  e.stopPropagation();\n                  // Remove watermark from local state\n                  setLocalWatermarks(prev => prev.filter(w => w.id !== watermark.id));\n                  // Notify parent to remove watermark\n                  if (onRemoveWatermark) {\n                    onRemoveWatermark(watermark.id);\n                  }\n                },\n                children: \"\\xD7\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 514,\n                columnNumber: 19\n              }, this)]\n            }, watermark.id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 498,\n              columnNumber: 17\n            }, this);\n          })]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 454,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 453,\n        columnNumber: 9\n      }, this), positionIndicator.visible && /*#__PURE__*/_jsxDEV(PositionIndicator, {\n        children: [\"X: \", Math.round(positionIndicator.x), \", Y: \", Math.round(positionIndicator.y)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 534,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 452,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Controls, {\n      children: [/*#__PURE__*/_jsxDEV(Button, {\n        className: \"secondary\",\n        onClick: resetPositions,\n        whileHover: {\n          scale: 1.05\n        },\n        whileTap: {\n          scale: 0.95\n        },\n        children: [/*#__PURE__*/_jsxDEV(RotateCcw, {\n          size: 16\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 547,\n          columnNumber: 11\n        }, this), \"Reset Positions\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 541,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        className: \"primary\",\n        onClick: onClose,\n        whileHover: {\n          scale: 1.05\n        },\n        whileTap: {\n          scale: 0.95\n        },\n        children: [/*#__PURE__*/_jsxDEV(Save, {\n          size: 16\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 556,\n          columnNumber: 11\n        }, this), \"Save Positions\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 550,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 540,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 420,\n    columnNumber: 5\n  }, this);\n}\n_s(VisualPositioning, \"5CTIs3SSKA4gk+63+bT3zMqYt6w=\");\n_c19 = VisualPositioning;\nexport default VisualPositioning;\nvar _c, _c2, _c3, _c4, _c5, _c6, _c7, _c8, _c9, _c0, _c1, _c10, _c11, _c12, _c13, _c14, _c15, _c16, _c17, _c18, _c19;\n$RefreshReg$(_c, \"PositioningContainer\");\n$RefreshReg$(_c2, \"Header\");\n$RefreshReg$(_c3, \"Title\");\n$RefreshReg$(_c4, \"CloseButton\");\n$RefreshReg$(_c5, \"Instructions\");\n$RefreshReg$(_c6, \"InstructionsTitle\");\n$RefreshReg$(_c7, \"InstructionsList\");\n$RefreshReg$(_c8, \"InstructionItem\");\n$RefreshReg$(_c9, \"PreviewContainer\");\n$RefreshReg$(_c0, \"PDFPreview\");\n$RefreshReg$(_c1, \"PDFContent\");\n$RefreshReg$(_c10, \"PDFBackground\");\n$RefreshReg$(_c11, \"PDFImage\");\n$RefreshReg$(_c12, \"PDFPlaceholder\");\n$RefreshReg$(_c13, \"PDFIcon\");\n$RefreshReg$(_c14, \"DraggableWatermark\");\n$RefreshReg$(_c15, \"WatermarkHandle\");\n$RefreshReg$(_c16, \"PositionIndicator\");\n$RefreshReg$(_c17, \"Controls\");\n$RefreshReg$(_c18, \"Button\");\n$RefreshReg$(_c19, \"VisualPositioning\");","map":{"version":3,"names":["React","useState","useRef","useEffect","motion","styled","X","Eye","Save","RotateCcw","Move","Target","FileText","jsxDEV","_jsxDEV","PositioningContainer","div","_c","Header","_c2","Title","h2","_c3","CloseButton","button","_c4","Instructions","_c5","InstructionsTitle","h3","_c6","InstructionsList","ul","_c7","InstructionItem","li","_c8","PreviewContainer","_c9","PDFPreview","_c0","PDFContent","_c1","PDFBackground","_c10","PDFImage","object","_c11","PDFPlaceholder","_c12","PDFIcon","_c13","DraggableWatermark","props","fontSize","color","opacity","rotation","_c14","WatermarkHandle","_c15","PositionIndicator","_c16","Controls","_c17","Button","_c18","VisualPositioning","watermarks","onUpdateProperty","onClose","currentFileId","apiBaseUrl","_s","isDragging","setIsDragging","draggedElement","setDraggedElement","dragOffset","setDragOffset","x","y","positionIndicator","setPositionIndicator","visible","pdfUrl","setPdfUrl","pdfLoading","setPdfLoading","localWatermarks","setLocalWatermarks","previewRef","handleMouseDown","e","watermarkId","preventDefault","rect","currentTarget","getBoundingClientRect","previewRect","current","clientX","left","clientY","top","handleMouseMove","constrainedX","Math","max","min","width","constrainedY","height","pdfX","pdfY","console","log","round","prev","map","w","id","position","custom_x","custom_y","handleMouseUp","watermark","find","document","addEventListener","removeEventListener","getWatermarkPosition","undefined","_previewRef$current","positions","center","resetPositions","forEach","uniqueWatermarks","filter","index","self","findIndex","children","size","fileName","_jsxFileName","lineNumber","columnNumber","onClick","ref","data","type","onError","style","marginTop","className","font_size","onMouseDown","whileHover","scale","whileTap","text","stopPropagation","onRemoveWatermark","_c19","$RefreshReg$"],"sources":["/Users/ashishrajshekhar/Desktop/ASU/Fall 2025/watermark_service/frontend/src/components/VisualPositioning.js"],"sourcesContent":["import React, { useState, useRef, useEffect } from 'react';\nimport { motion } from 'framer-motion';\nimport styled from 'styled-components';\nimport { X, Eye, Save, RotateCcw, Move, Target, FileText } from 'lucide-react';\n\nconst PositioningContainer = styled.div`\n  position: relative;\n`;\n\nconst Header = styled.div`\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 30px;\n`;\n\nconst Title = styled.h2`\n  font-size: 1.8rem;\n  font-weight: 600;\n  color: #1a202c;\n  display: flex;\n  align-items: center;\n  gap: 10px;\n`;\n\nconst CloseButton = styled.button`\n  background: #fed7d7;\n  color: #c53030;\n  border: none;\n  border-radius: 8px;\n  padding: 12px;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: all 0.3s ease;\n\n  &:hover {\n    background: #feb2b2;\n    transform: scale(1.1);\n  }\n`;\n\nconst Instructions = styled.div`\n  background: #ebf8ff;\n  border: 1px solid #bee3f8;\n  border-radius: 12px;\n  padding: 20px;\n  margin-bottom: 30px;\n`;\n\nconst InstructionsTitle = styled.h3`\n  font-size: 1.1rem;\n  font-weight: 600;\n  color: #2b6cb0;\n  margin-bottom: 15px;\n  display: flex;\n  align-items: center;\n  gap: 8px;\n`;\n\nconst InstructionsList = styled.ul`\n  list-style: none;\n  padding: 0;\n  margin: 0;\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));\n  gap: 10px;\n`;\n\nconst InstructionItem = styled.li`\n  color: #4a5568;\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  font-size: 0.9rem;\n\n  &:before {\n    content: \"•\";\n    color: #667eea;\n    font-weight: bold;\n  }\n`;\n\nconst PreviewContainer = styled.div`\n  position: relative;\n  background: #f8fafc;\n  border: 2px solid #e2e8f0;\n  border-radius: 12px;\n  padding: 20px;\n  min-height: 600px;\n  overflow: hidden;\n`;\n\nconst PDFPreview = styled.div`\n  position: relative;\n  width: 100%;\n  height: 560px;\n  background: white;\n  border: 1px solid #e2e8f0;\n  border-radius: 8px;\n  overflow: hidden;\n  box-shadow: 0 4px 12px rgba(0,0,0,0.1);\n`;\n\nconst PDFContent = styled.div`\n  width: 100%;\n  height: 100%;\n  background: \n    linear-gradient(45deg, #f0f0f0 25%, transparent 25%), \n    linear-gradient(-45deg, #f0f0f0 25%, transparent 25%), \n    linear-gradient(45deg, transparent 75%, #f0f0f0 75%), \n    linear-gradient(-45deg, transparent 75%, #f0f0f0 75%);\n  background-size: 20px 20px;\n  background-position: 0 0, 0 10px, 10px -10px, -10px 0px;\n  position: relative;\n  overflow: hidden;\n`;\n\nconst PDFBackground = styled.div`\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background: white;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  z-index: 1;\n`;\n\nconst PDFImage = styled.object`\n  max-width: 100%;\n  max-height: 100%;\n  object-fit: contain;\n  box-shadow: 0 4px 12px rgba(0,0,0,0.1);\n  border: 1px solid #e2e8f0;\n  border-radius: 4px;\n`;\n\nconst PDFPlaceholder = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  height: 100%;\n  color: #718096;\n  font-size: 1.1rem;\n  text-align: center;\n  padding: 20px;\n`;\n\nconst PDFIcon = styled.div`\n  font-size: 3rem;\n  margin-bottom: 15px;\n  color: #cbd5e0;\n`;\n\nconst DraggableWatermark = styled(motion.div)`\n  position: absolute;\n  cursor: move;\n  user-select: none;\n  padding: 8px 12px;\n  border-radius: 6px;\n  background: rgba(102, 126, 234, 0.9);\n  color: white;\n  font-weight: 600;\n  font-size: ${props => props.fontSize}px;\n  color: ${props => props.color};\n  opacity: ${props => props.opacity};\n  transform: rotate(${props => props.rotation}deg);\n  box-shadow: 0 4px 12px rgba(0,0,0,0.2);\n  border: 2px solid rgba(255,255,255,0.3);\n  z-index: 20;\n  transition: all 0.3s ease;\n  backdrop-filter: blur(2px);\n\n  &:hover {\n    box-shadow: 0 6px 20px rgba(0,0,0,0.3);\n    transform: rotate(${props => props.rotation}deg) scale(1.05);\n  }\n\n  &.dragging {\n    z-index: 100;\n    box-shadow: 0 8px 25px rgba(0,0,0,0.4);\n  }\n`;\n\nconst WatermarkHandle = styled.div`\n  position: absolute;\n  top: -8px;\n  right: -8px;\n  width: 20px;\n  height: 20px;\n  background: #c53030;\n  border-radius: 50%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  cursor: pointer;\n  color: white;\n  font-size: 12px;\n  font-weight: bold;\n  box-shadow: 0 2px 6px rgba(0,0,0,0.3);\n  transition: all 0.3s ease;\n\n  &:hover {\n    background: #e53e3e;\n    transform: scale(1.2);\n  }\n`;\n\nconst PositionIndicator = styled.div`\n  position: absolute;\n  top: 10px;\n  right: 10px;\n  background: rgba(0,0,0,0.8);\n  color: white;\n  padding: 8px 12px;\n  border-radius: 6px;\n  font-size: 0.8rem;\n  font-weight: 600;\n  z-index: 50;\n  pointer-events: none;\n`;\n\nconst Controls = styled.div`\n  display: flex;\n  justify-content: center;\n  gap: 15px;\n  margin-top: 20px;\n`;\n\nconst Button = styled(motion.button)`\n  padding: 12px 24px;\n  border: none;\n  border-radius: 8px;\n  font-weight: 600;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  transition: all 0.3s ease;\n\n  &.primary {\n    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n    color: white;\n    \n    &:hover {\n      transform: translateY(-2px);\n      box-shadow: 0 8px 25px rgba(102, 126, 234, 0.3);\n    }\n  }\n\n  &.secondary {\n    background: #f7fafc;\n    color: #4a5568;\n    border: 2px solid #e2e8f0;\n    \n    &:hover {\n      background: #edf2f7;\n      border-color: #cbd5e0;\n    }\n  }\n`;\n\nfunction VisualPositioning({ watermarks, onUpdateProperty, onClose, currentFileId, apiBaseUrl }) {\n  const [isDragging, setIsDragging] = useState(false);\n  const [draggedElement, setDraggedElement] = useState(null);\n  const [dragOffset, setDragOffset] = useState({ x: 0, y: 0 });\n  const [positionIndicator, setPositionIndicator] = useState({ x: 0, y: 0, visible: false });\n  const [pdfUrl, setPdfUrl] = useState(null);\n  const [pdfLoading, setPdfLoading] = useState(false);\n  const [localWatermarks, setLocalWatermarks] = useState(watermarks);\n  const previewRef = useRef(null);\n\n  const handleMouseDown = (e, watermarkId) => {\n    e.preventDefault();\n    setIsDragging(true);\n    setDraggedElement(watermarkId);\n    \n    const rect = e.currentTarget.getBoundingClientRect();\n    const previewRect = previewRef.current.getBoundingClientRect();\n    \n    setDragOffset({\n      x: e.clientX - rect.left,\n      y: e.clientY - rect.top\n    });\n  };\n\n  const handleMouseMove = (e) => {\n    if (!isDragging || !draggedElement) return;\n\n    const previewRect = previewRef.current.getBoundingClientRect();\n    const x = e.clientX - previewRect.left - dragOffset.x;\n    const y = e.clientY - previewRect.top - dragOffset.y;\n\n    // Constrain to preview bounds\n    const constrainedX = Math.max(0, Math.min(x, previewRect.width - 100));\n    const constrainedY = Math.max(0, Math.min(y, previewRect.height - 50));\n\n    // Update position indicator\n    setPositionIndicator({\n      x: constrainedX,\n      y: constrainedY,\n      visible: true\n    });\n\n    // Convert to PDF coordinates (assuming A4 ratio)\n    const pdfX = (constrainedX / previewRect.width) * 595; // A4 width in points\n    const pdfY = (constrainedY / previewRect.height) * 842; // A4 height in points\n    \n    console.log(`Dragging watermark ${draggedElement} to PDF coordinates: x=${Math.round(pdfX)}, y=${Math.round(pdfY)}`); // Debug\n\n    // Update local state immediately for real-time feedback\n    setLocalWatermarks(prev => prev.map(w => \n      w.id === draggedElement \n        ? { \n            ...w, \n            position: 'custom',\n            custom_x: Math.round(pdfX),\n            custom_y: Math.round(pdfY)\n          }\n        : w\n    ));\n  };\n\n  const handleMouseUp = () => {\n    if (draggedElement) {\n      // Send final position to backend\n      const watermark = localWatermarks.find(w => w.id === draggedElement);\n      if (watermark && watermark.position === 'custom') {\n        onUpdateProperty(draggedElement, 'position', 'custom');\n        onUpdateProperty(draggedElement, 'custom_x', watermark.custom_x);\n        onUpdateProperty(draggedElement, 'custom_y', watermark.custom_y);\n      }\n    }\n    \n    setIsDragging(false);\n    setDraggedElement(null);\n    setPositionIndicator(prev => ({ ...prev, visible: false }));\n  };\n\n  useEffect(() => {\n    if (isDragging) {\n      document.addEventListener('mousemove', handleMouseMove);\n      document.addEventListener('mouseup', handleMouseUp);\n      \n      return () => {\n        document.removeEventListener('mousemove', handleMouseMove);\n        document.removeEventListener('mouseup', handleMouseUp);\n      };\n    }\n  }, [isDragging, draggedElement, dragOffset, handleMouseMove, handleMouseUp]);\n\n  const getWatermarkPosition = (watermark) => {\n    if (watermark.position === 'custom' && watermark.custom_x !== undefined && watermark.custom_y !== undefined) {\n      const previewRect = previewRef.current?.getBoundingClientRect();\n      if (previewRect) {\n        // Convert PDF coordinates back to screen coordinates\n        const x = (watermark.custom_x / 595) * previewRect.width;\n        const y = (watermark.custom_y / 842) * previewRect.height;\n        return { x, y };\n      }\n    }\n    \n    // Default positions\n    const positions = {\n      'top-left': { x: 20, y: 20 },\n      'top-center': { x: 250, y: 20 },\n      'top-right': { x: 480, y: 20 },\n      'center-left': { x: 20, y: 250 },\n      'center': { x: 250, y: 250 },\n      'center-right': { x: 480, y: 250 },\n      'bottom-left': { x: 20, y: 480 },\n      'bottom-center': { x: 250, y: 480 },\n      'bottom-right': { x: 480, y: 480 }\n    };\n    \n    return positions[watermark.position] || positions.center;\n  };\n\n  const resetPositions = () => {\n    localWatermarks.forEach(watermark => {\n      onUpdateProperty(watermark.id, 'position', 'center');\n      onUpdateProperty(watermark.id, 'custom_x', '');\n      onUpdateProperty(watermark.id, 'custom_y', '');\n    });\n    \n    // Update local state\n    setLocalWatermarks(prev => prev.map(w => ({\n      ...w,\n      position: 'center',\n      custom_x: '',\n      custom_y: ''\n    })));\n  };\n\n  // Load PDF for visual positioning\n  useEffect(() => {\n    if (currentFileId && apiBaseUrl) {\n      setPdfLoading(true);\n      // Use the preview endpoint to get the PDF for visual positioning\n      setPdfUrl(`${apiBaseUrl}/preview/${currentFileId}`);\n      setPdfLoading(false);\n    }\n  }, [currentFileId, apiBaseUrl]);\n\n  // Sync local watermarks with props and remove duplicates\n  useEffect(() => {\n    // Remove duplicates based on ID\n    const uniqueWatermarks = watermarks.filter((watermark, index, self) => \n      index === self.findIndex(w => w.id === watermark.id)\n    );\n    setLocalWatermarks(uniqueWatermarks);\n  }, [watermarks]);\n\n  return (\n    <PositioningContainer>\n      <Header>\n        <Title>\n          <Eye size={24} />\n          Visual Watermark Positioning\n        </Title>\n        <CloseButton onClick={onClose}>\n          <X size={20} />\n        </CloseButton>\n      </Header>\n\n      <Instructions>\n        <InstructionsTitle>\n          <Target size={20} />\n          Drag and Drop Instructions\n        </InstructionsTitle>\n        <InstructionsList>\n          <InstructionItem>\n            <Move size={16} />\n            Click and drag watermarks to position them anywhere on the PDF\n          </InstructionItem>\n          <InstructionItem>\n            <Target size={16} />\n            Watch the coordinates update in real-time as you drag\n          </InstructionItem>\n          <InstructionItem>\n            <Save size={16} />\n            Click 'Save Positions' to apply your changes\n          </InstructionItem>\n        </InstructionsList>\n      </Instructions>\n\n      <PreviewContainer>\n        <PDFPreview ref={previewRef}>\n          <PDFContent>\n            <PDFBackground>\n              {pdfLoading ? (\n                <PDFPlaceholder>\n                  <PDFIcon>\n                    <FileText size={60} />\n                  </PDFIcon>\n                  <div>Loading PDF preview...</div>\n                </PDFPlaceholder>\n              ) : pdfUrl ? (\n                <PDFImage \n                  data={pdfUrl} \n                  type=\"application/pdf\"\n                  onError={() => {\n                    // Fallback to placeholder if PDF loading fails\n                    setPdfUrl(null);\n                  }}\n                >\n                  <PDFPlaceholder>\n                    <PDFIcon>\n                      <FileText size={60} />\n                    </PDFIcon>\n                    <div>PDF preview not available</div>\n                    <div style={{ fontSize: '0.9rem', marginTop: '10px' }}>\n                      Drag watermarks to position them on your PDF\n                    </div>\n                  </PDFPlaceholder>\n                </PDFImage>\n              ) : (\n                <PDFPlaceholder>\n                  <PDFIcon>\n                    <FileText size={60} />\n                  </PDFIcon>\n                  <div>PDF preview will appear here</div>\n                  <div style={{ fontSize: '0.9rem', marginTop: '10px' }}>\n                    Drag watermarks to position them on your PDF\n                  </div>\n                </PDFPlaceholder>\n              )}\n            </PDFBackground>\n            \n            {localWatermarks.map((watermark) => {\n              const position = getWatermarkPosition(watermark);\n              return (\n                <DraggableWatermark\n                  key={watermark.id}\n                  style={{\n                    left: position.x,\n                    top: position.y\n                  }}\n                  className={draggedElement === watermark.id ? 'dragging' : ''}\n                  fontSize={watermark.font_size}\n                  color={watermark.color}\n                  opacity={watermark.opacity}\n                  rotation={watermark.rotation}\n                  onMouseDown={(e) => handleMouseDown(e, watermark.id)}\n                  whileHover={{ scale: 1.05 }}\n                  whileTap={{ scale: 0.95 }}\n                >\n                  {watermark.text}\n                  <WatermarkHandle\n                    onClick={(e) => {\n                      e.stopPropagation();\n                      // Remove watermark from local state\n                      setLocalWatermarks(prev => prev.filter(w => w.id !== watermark.id));\n                      // Notify parent to remove watermark\n                      if (onRemoveWatermark) {\n                        onRemoveWatermark(watermark.id);\n                      }\n                    }}\n                  >\n                    ×\n                  </WatermarkHandle>\n                </DraggableWatermark>\n              );\n            })}\n          </PDFContent>\n        </PDFPreview>\n\n        {positionIndicator.visible && (\n          <PositionIndicator>\n            X: {Math.round(positionIndicator.x)}, Y: {Math.round(positionIndicator.y)}\n          </PositionIndicator>\n        )}\n      </PreviewContainer>\n\n      <Controls>\n        <Button\n          className=\"secondary\"\n          onClick={resetPositions}\n          whileHover={{ scale: 1.05 }}\n          whileTap={{ scale: 0.95 }}\n        >\n          <RotateCcw size={16} />\n          Reset Positions\n        </Button>\n        <Button\n          className=\"primary\"\n          onClick={onClose}\n          whileHover={{ scale: 1.05 }}\n          whileTap={{ scale: 0.95 }}\n        >\n          <Save size={16} />\n          Save Positions\n        </Button>\n      </Controls>\n    </PositioningContainer>\n  );\n}\n\nexport default VisualPositioning;\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,MAAM,EAAEC,SAAS,QAAQ,OAAO;AAC1D,SAASC,MAAM,QAAQ,eAAe;AACtC,OAAOC,MAAM,MAAM,mBAAmB;AACtC,SAASC,CAAC,EAAEC,GAAG,EAAEC,IAAI,EAAEC,SAAS,EAAEC,IAAI,EAAEC,MAAM,EAAEC,QAAQ,QAAQ,cAAc;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAE/E,MAAMC,oBAAoB,GAAGV,MAAM,CAACW,GAAG;AACvC;AACA,CAAC;AAACC,EAAA,GAFIF,oBAAoB;AAI1B,MAAMG,MAAM,GAAGb,MAAM,CAACW,GAAG;AACzB;AACA;AACA;AACA;AACA,CAAC;AAACG,GAAA,GALID,MAAM;AAOZ,MAAME,KAAK,GAAGf,MAAM,CAACgB,EAAE;AACvB;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAACC,GAAA,GAPIF,KAAK;AASX,MAAMG,WAAW,GAAGlB,MAAM,CAACmB,MAAM;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAACC,GAAA,GAhBIF,WAAW;AAkBjB,MAAMG,YAAY,GAAGrB,MAAM,CAACW,GAAG;AAC/B;AACA;AACA;AACA;AACA;AACA,CAAC;AAACW,GAAA,GANID,YAAY;AAQlB,MAAME,iBAAiB,GAAGvB,MAAM,CAACwB,EAAE;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAACC,GAAA,GARIF,iBAAiB;AAUvB,MAAMG,gBAAgB,GAAG1B,MAAM,CAAC2B,EAAE;AAClC;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAACC,GAAA,GAPIF,gBAAgB;AAStB,MAAMG,eAAe,GAAG7B,MAAM,CAAC8B,EAAE;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAACC,GAAA,GAZIF,eAAe;AAcrB,MAAMG,gBAAgB,GAAGhC,MAAM,CAACW,GAAG;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAACsB,GAAA,GARID,gBAAgB;AAUtB,MAAME,UAAU,GAAGlC,MAAM,CAACW,GAAG;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAACwB,GAAA,GATID,UAAU;AAWhB,MAAME,UAAU,GAAGpC,MAAM,CAACW,GAAG;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAAC0B,GAAA,GAZID,UAAU;AAchB,MAAME,aAAa,GAAGtC,MAAM,CAACW,GAAG;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAAC4B,IAAA,GAXID,aAAa;AAanB,MAAME,QAAQ,GAAGxC,MAAM,CAACyC,MAAM;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAACC,IAAA,GAPIF,QAAQ;AASd,MAAMG,cAAc,GAAG3C,MAAM,CAACW,GAAG;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAACiC,IAAA,GAVID,cAAc;AAYpB,MAAME,OAAO,GAAG7C,MAAM,CAACW,GAAG;AAC1B;AACA;AACA;AACA,CAAC;AAACmC,IAAA,GAJID,OAAO;AAMb,MAAME,kBAAkB,GAAG/C,MAAM,CAACD,MAAM,CAACY,GAAG,CAAC;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAeqC,KAAK,IAAIA,KAAK,CAACC,QAAQ;AACtC,WAAWD,KAAK,IAAIA,KAAK,CAACE,KAAK;AAC/B,aAAaF,KAAK,IAAIA,KAAK,CAACG,OAAO;AACnC,sBAAsBH,KAAK,IAAIA,KAAK,CAACI,QAAQ;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwBJ,KAAK,IAAIA,KAAK,CAACI,QAAQ;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAACC,IAAA,GA5BIN,kBAAkB;AA8BxB,MAAMO,eAAe,GAAGtD,MAAM,CAACW,GAAG;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}